let isShowingContents,last_known_scroll_position,parallaxInstance,navShutters,introTimeLine,sectionTimeLine,navLinks,sections,currentSection;function initIntro(){document.querySelector(".intro");document.querySelector(".introBtn").addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();e=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);window.scrollY==e&&window.scrollTo(0,0),TweenLite.to(window,.5,{scrollTo:{y:"100"}})}),window.addEventListener("scroll",e=>{isShowingContents||(last_known_scroll_position<window.scrollY?(parallaxInstance.disable(),introTimeLine.play()):(parallaxInstance.enable(),introTimeLine.reverse()),last_known_scroll_position=window.scrollY)})}function initNav(){isShowingContents=!1;var e=document.querySelector(".intro");navLinks=document.querySelectorAll("nav>a"),navShutters=document.querySelectorAll(".shutters"),sections=document.querySelectorAll("section>.pane"),(introTimeLine=new TimelineLite).add(TweenMax.to(e,.8,{ease:Expo.easeInOut,y:"-100vh"})),introTimeLine.add(TweenMax.staggerTo(navShutters,.5,{ease:Expo.easeInOut,left:"100%"},.08)),introTimeLine.stop();for(let e=0;e<navLinks.length;e++)navLinks[e].addEventListener("mouseover",e=>{isShowingContents||(TweenMax.to(navLinks,.5,{flex:"1"}),TweenMax.killTweensOf(e.target,{flex:!0}),TweenMax.to(e.target,.5,{flex:"1.3"}))}),navLinks[e].addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),setState(e),sectionTimeLine=new TimelineLite,isShowingContents&&currentSection&&sectionTimeLine.add(TweenMax.to(window,.3,{scrollTo:0,onComplete:setStateNav})),sectionTimeLine.add("startTransition"),sectionTimeLine.add(TweenMax.to(navLinks,.8,{ease:Expo.easeInOut,flex:"1"}),"startTransition"),TweenMax.killTweensOf(e.target,{flex:!0}),sectionTimeLine.add(TweenMax.to(e.target,.8,{ease:Expo.easeInOut,flex:"30",onStart:setTransitionStateToContents,onStartParams:[e.target],onComplete:setStateContents,onCompleteParams:[e.target],onReverseComplete:unsetStateContents}),"startTransition"),currentSection=document.querySelector(e.target.hash)});document.querySelector(".nav-hamburger").addEventListener("click",e=>{hideContent(),sectionTimeLine.reverse()})}function setStateNav(e){deactivateLinks(e),deactivateContentPanes(e)}function deactivateLinks(){for(let e=0;e<navLinks.length;e++)navLinks[e].classList.remove("active")}function deactivateContentPanes(){for(let e=0;e<sections.length;e++)sections[e].classList.remove("active")}function setTransitionStateToContents(e){isShowingContents=!0,window.scrollTo(0,0),document.querySelector(e.hash).classList.add("active"),document.querySelector("body").classList.add("main")}function unsetTransitionStateToContents(){var e=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),t=(0==window.scrollY&&(last_known_scroll_position=0,window.scrollTo(0,e)),isShowingContents=!1,document.querySelectorAll(".pane.active"));for(let e=0;e<t.length;e++)t[e].classList.remove("active");document.querySelector("body").classList.remove("main")}function setStateContents(e){showContent(e)}function unsetStateContents(){hideContent(),unsetTransitionStateToContents()}function showContent(e){e.classList.add("active")}function hideContent(){var t=document.querySelectorAll("a.section-link.active");for(let e=0;e<t.length;e++)t[e].classList.remove("active")}function setState(e){}function initState(){if(null!==history.state)switch(history.state.section){case"#design":console.log("design only"),introTimeLine.play(),document.querySelector("#design").click();break;case"#dev":console.log("dev only"),introTimeLine.play();break;case"#about":introTimeLine.play(),console.log("about only");break;case"#main":introTimeLine.play();break;default:console.log("doing nothing")}}function initParallax(){var e=document.querySelector(".intro");parallaxInstance=new Parallax(e,{relativeInput:!0,hoverOnly:!0,selector:".bg, h1",pointerEvents:!0})}function initContentParallax(){window.addEventListener("scroll",updateContentParallax)}function updateContentParallax(){var e=window.pageYOffset/window.innerHeight*100,t=document.querySelectorAll(".contents .pane h1"),t=(TweenMax.to(t,.8,{ease:Expo.easeOut,bottom:15+.5*e+"vh"}),document.querySelectorAll(".contents .pane .feature"));TweenMax.to(t,.8,{ease:Expo.easeOut,backgroundPosition:"50% "+(50+.1*e)+"%"})}function initModal(){var t=document.querySelectorAll(".modal-btn");for(let e=0;e<t.length;e++)t[e].addEventListener("click",function(e){e.preventDefault();let t=e.target.parentNode,n=document.getElementById("modals");var o=document.getElementById("modal-bubble"),i=t.style.backgroundImage.replace(/.*\s?url\([\'\"]?/,"").replace(/[\'\"]?\).*/,""),i=(o.querySelector("img").setAttribute("src",i),e.target.parentNode.dataset.contents),e=document.getElementById(i);"design"==t.dataset.class?(n.classList.add("design"),n.classList.remove("dev")):"develop"==t.dataset.class&&(n.classList.add("dev"),n.classList.remove("design")),e.classList.add("show"),n.classList.add("renderBehind"),n.scrollTo(0,0);var i=e.querySelector("img").getBoundingClientRect(),e=(o.classList.add("show"),t.getBoundingClientRect()),a=window.scrollY;o.style.top=e.top+a+"px",o.style.left=e.left+"px",o.style.width=e.width+"px",o.style.height=e.height+"px",TweenMax.to(o,.75,{ease:Expo.easeInOut,top:i.top+a+"px",left:i.x,width:i.width,height:i.height,onStart:function(){t.classList.add("hide")},onComplete:function(){n.classList.add("show")}})});document.getElementById("close-btn").addEventListener("click",function(e){var t=document.querySelectorAll("a.modal-btn.hide");for(let e=0;e<t.length;e++)t[e].classList.remove("hide");document.getElementById("modal-bubble").classList.remove("show");document.getElementById("modals").classList.remove("show","renderBehind");var n=document.querySelectorAll("#modals .section");for(let e=0;e<n.length;e++)n[e].classList.remove("show")})}window.addEventListener("DOMContentLoaded",function(){initParallax(),initIntro(),initNav(),initContentParallax(),initModal()});